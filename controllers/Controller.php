<?php

namespace app\controllers;

use Yii;
use yii\web\Controller as BaseController;
use Detection\MobileDetect;


class Controller extends BaseController
{
    public function init()
    {
        parent::init(); // TODO: Change the autogenerated stub

        $session = Yii::$app->session;

        // 判断session是否开启
        if (!$session->isActive) {
            $session->open();
        }

        // 判断language语言缓存是否存在
        if ($session->has('language')) {
            Yii::$app->language = $session->get('language');
        } else {
            Yii::$app->language = 'zh-CN';
        }

        // 判断是否是移动设备访问
        $device = new MobileDetect();
        if ($device->isMobile()) {
            $this->redirect(['/mobile']);
        }


    }
}